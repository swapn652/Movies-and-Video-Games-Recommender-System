<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <!-- <link rel="stylesheet" type="text/css" href="/static/searchedAndRecommended.css"> -->
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='searchedAndRecommended.css') }}">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js">
  </script>

  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js">
  </script>

  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/ui-lightness/jquery-ui.css" rel="stylesheet"
    type="text/css" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sbuttons/dist/sbuttons.min.css">

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css" integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc" crossorigin="anonymous">

  <title>Searched Result</title>
</head>

<body id="content">
  <div class="movieRS">
    <h1>Movie Recommender System</h1>
  </div>

  <!-- {% if searchedMovie in movies_list %}
  <div class="searchBox form-floating mb-3"> -->
     <!-- action is transfered to /searchedResult so that the information about the required searched movie is presented on screen -->
    <!-- <form class="d-flex" action="/searchedResult" method="post" name="form">
      <input class="form-control me-2 searchMovie" type="text" id="tags" id="floatingInput" type="search"
        placeholder="What are you looking for?" name="movie">
      <label for="floatingInput">What are you looking for?</label>
      <button type="submit" class="btn btn-primary searchBtn">Search</button>
    </form>
  </div>
  {% else %}
  <div class="searchBox form-floating mb-3">
    <form class="d-flex" action="/searchedResult4" method="post" name="form">
      <input class="form-control me-2 searchMovie" type="text" id="tags" id="floatingInput" type="search"
        placeholder="What are you looking for?" name="movie">
      <label for="floatingInput">What are you looking for?</label>
      <button type="submit" class="btn btn-primary searchBtn">Search</button>
    </form>
  </div>
  {% endif %} -->

  <div class="searchBox form-floating mb-3">
    <!-- action is transfered to /searchedResult so that the information about the required searched movie is presented on screen -->
   <form class="d-flex" action="/searchedResult" method="post" name="form">
     <input class="form-control me-2 searchMovie" type="text" id="tags" id="floatingInput" type="search"
       placeholder="What are you looking for?" name="movie">
     <label for="floatingInput">What are you looking for?</label>
     <button type="submit" class="btn btn-primary searchBtn">Search</button>
   </form>
 </div>

  <!-- <div class="searchedMovieTitle">
          <h1 class="searchedMovieName">Lorem ipsum dolor sit amet</h1>
      </div> -->

  <!-- <div class="movieInfo">
          <div class="searchedMoviePoster">
              <img src="/static/people_photo/leomord.jpg" alt="Leomord" class="moviePosterImg">
              <div class="searchedMovieTitle">
                  <h1 class="searchedMovieName">Lorem ipsum dolor sit amet</h1>
              </div>
          </div>
      </div>     -->

  <body id="content">
    <div class="searchedMovieTitle">
      <center>
        <h1 id="searchedMovieName" class="text-uppercase">{{searchedTitle}}</h1>
      </center>
    </div>
    <br>

    <div id="mContent">
      <div class="searchedMoviePoster">
        <img class="moviePosterImg" style="border-radius: 40px;margin-left: 90px;" height="400" width="250"
          src="{{searchedPoster}}">
      </div>
     
      <div id="details">
        <br />
        <!-- <h6 id="title" style="color:white;">TITLE: &nbsp;Lorem, ipsum dolor.</h6> -->
        <h6 id="overview" style="color:white;max-width: 85%">OVERVIEW: &nbsp;{{searchedOverview}}</h6>
        <h6 id="vote_average" style="color:white;">RATING: &nbsp;{{searchedVoteAverage}}/10 ({{searchedVoteCount}}
          votes)</h6>

        <h6 id="genres" style="color:white;">GENRE: &nbsp;{% for genre in searchedGenres %}{{genre}} {% endfor %}</h6>


        <h6 id="date" style="color:white;">RELEASE DATE: &nbsp;{{searchedReleaseDate}}</h6>
        <h6 id="runtime" style="color:white;">RUNTIME: &nbsp;{{searchedRuntime}} minutes</h6>
        <h6 id="status" style="color:white;">STATUS: &nbsp;{{searchedStatus}}</h6>
        <!-- <button type="submit" class="btn btn-primary playBtn">Search</button>  -->
      </div>
    </div>
    <!-- <button type="submit" class="sbtn  gradient-btn rounded-btn red-btn playBtn">Play</button>  -->

    



    <!-- <div class="modal fade" id="Leomord" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel3"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header" style="background-color: #e50914;color: white;">
          <h5 class="modal-title" id="exampleModalLabel3">Leomord</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true" style="color: white">&times;</span>
          </button>
        </div> -->

        <!-- the bootstrap modal here i gave id as combination of a and id because details 0 contains numbers and an id in bootstrap cant 
        begin with a number-->
    {% for name, details in cast_details.items() if not cast_details.hidden %}
    <!-- looping over the dictionary from app.py to present required info in required container -->
    <div class="modal fade" id="a{{details[0]}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
      aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header" style="background-color: rgb(200, 33, 40);color: white;">
            <h5 class="modal-title" id="exampleModalLabel">{{name}}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>

          <div class="modal-body" style="background-color: rgb(125, 125, 125);color: white;">
            <img class="profile-pic" src="{{details[1]}}" alt="{{name}} - profile"
              style="width: 250px;height:400px;border-radius: 10px;">
            <div style="margin-left: 20px">
              <p><strong>Birthday:</strong> {{details[2]}} </p>
              <p><strong>Place of Birth:</strong> {{details[3]}} </p>
              <p>
              <p><strong>Biography:</strong>
              <p>
                {{details[4]}}
              </p>
            </div>
          </div>
          <div class="modal-footer" style="background-color: rgb(32, 27, 80);color: white;">
            <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}

    {% if casts|length > 1 %}
    <div class="cast" style="color: #E8E8E8;">
      <center>
        <h1>TOP CAST</h1>
        <h3>(Click on the cast to know more)</h3>
      </center>
    </div>



    <div class="movie-content">
      {% for name, details in casts.items() if not casts.hidden %}
      <!-- looping over the dictionary from app.py to present required info in required container -->
      <div class="castcard card" style="width: 15rem;" title="Click to know more about {{name}}" data-bs-toggle="modal"
        data-bs-target="#a{{details[0]}}">
        <div class="imghvr">
          <img class="card-img-top cast-img" id="{{details[0]}}" height="360" width="240" alt="{{name}} - profile"
            src="{{details[2]}}">
          <figcaption class="fig">
            <button class="card-btn btn btn-danger"> Know More </button>
          </figcaption>
        </div>
        <div class="card-body">
          <h5 class="card-title">{{name|title}}</h5>
          <h5 class="card-title"><span style="color:#756969;font-size: 20px;">as: {{details[1]|title}}</span></h5>
        </div>
      </div>
      {% endfor %}
    </div>
    {% endif %}


    <center>
      {% if movie_reviews %}
      <h1 class="movie">USER REVIEWS</h1>
       <div class="col-md-12" style="margin: 0 auto; margin-top:25px;">
          <table class="table table-bordered" bordercolor="white" style="background-color: rgb(200, 33, 40); color:white">
              <thead>
                  <tr>
                      <th class="text-center" scope="col" style="width: 75%"><h4>REVIEWS</h4></th>
                      <th class="text-center" scope="col"><h4>SENTIMENTS</h4></th>
                  </tr>
              </thead>
      
              <tbody>
            {% for review, status in movie_reviews.items() if not movie_reviews.hidden %}
            <tr style="background-color:rgb(32, 27, 80);">
                    <td>{{review}}</td>
                  <td><center>
                      {{status}} : 
                      {% if status =='Good' %}
                        &#128515;
                      {% else %}
                        &#128534;
                      {% endif %}
                    </center>
                  </td>
                </tr>
              {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <div style="color:white;">
        <h1 style="color:white"> This movie is not released yet. Stay tuned! </h1>
      </div>
      {% endif %}
    </center>

    {% if recMoviesDetails|length > 1 %}
    <div class="movie" style="color: #E8E8E8;">
      <center><h1>YOU MIGHT ALSO LIKE:</h1></center>
    </div>

    <div class="movie-content">
      {% for poster, title in recMoviesDetails.items() if not recMoviesDetails.hidden %}
        <div class="card" style="width: 15rem;" title="{{title}}">
          <div class="imghvr">
            <img class="card-img-top" height="360" width="240" alt="{{title}} - poster" src={{poster}}>
            <figcaption class="fig">
              <!-- <button class="card-btn btn btn-danger"> Click Me </button> -->
              <!-- trying to send movie title as value to flask using request.form and then showing information about the movie -->
              <form action="/searchedResult2" method="post" title="lEOMORD">
                <input type="submit" class="card-btn btn btn-danger" name="title" value="{{title}}">
              </form>
            </figcaption>
           </div>
          <div class="card-body">
            <h5 class="card-title">{{title|upper}}</h5>
          </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="movie" style="color: #E8E8E8;">
      <center><h1>NO RECORD FOUND FOR SIMILAR MOVIES!</h1></center>
    </div>
     
    {% endif %}

      
    

   
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
  -->
    <script>
      $(function () {
        var availableTags = [
          {% for movie in movies_list %}
              "{{movie}}",
        {% endfor %}
      ];
      $("#tags").autocomplete({
        source: availableTags
      });
    } );

    </script>
  </body>

</html>